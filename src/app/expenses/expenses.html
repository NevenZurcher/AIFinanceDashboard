<div class="expenses-container">
  <header class="expenses-header glass-card">
    <div class="header-content">
      <h1>Expenses</h1>
    </div>
  </header>

  <section class="summary-section glass-card">
    <div class="summary-content">
      <lucide-icon [img]="ArrowDownRight" [size]="32" class="summary-icon"></lucide-icon>
      <div>
        <p class="summary-label">Total Expenses</p>
        <h2 class="summary-value text-error">${{ getTotalExpenses().toFixed(2) }}</h2>
      </div>
    </div>
  </section>

  <!-- Filters -->
  <section class="filters-section glass-card">
    <div class="filters-header">
      <lucide-icon [img]="Filter" [size]="20"></lucide-icon>
      <span>Filters</span>
    </div>
    <div class="filters-grid">
      <div class="form-group">
        <label>Account</label>
        <select [(ngModel)]="selectedAccountId" (change)="applyFilters()">
          <option value="">All Accounts</option>
          <option *ngFor="let account of accounts" [value]="account.id">{{ account.name }}</option>
        </select>
      </div>
      <div class="form-group">
        <label>Category</label>
        <select [(ngModel)]="selectedCategory" (change)="applyFilters()">
          <option value="">All Categories</option>
          <option *ngFor="let cat of categories" [value]="cat">{{ cat }}</option>
        </select>
      </div>
      <div class="form-group">
        <label>From</label>
        <input type="date" [(ngModel)]="dateFrom" (change)="applyFilters()">
      </div>
      <div class="form-group">
        <label>To</label>
        <input type="date" [(ngModel)]="dateTo" (change)="applyFilters()">
      </div>
    </div>
    <button class="btn-secondary" (click)="clearFilters()">Clear Filters</button>
  </section>

  <!-- Expenses List -->
  <section class="expenses-list">
    <div *ngIf="isLoading" class="loading">Loading expenses...</div>

    <div *ngIf="!isLoading && filteredTransactions.length === 0" class="empty-state glass-card">
      <lucide-icon [img]="Receipt" [size]="48" class="empty-icon"></lucide-icon>
      <h3>No Expenses Found</h3>
      <p>Your expenses will appear here</p>
    </div>

    <div *ngFor="let expense of filteredTransactions" class="expense-item glass-card">
      <div class="expense-icon">
        <lucide-icon [img]="Receipt" [size]="20"></lucide-icon>
      </div>
      <div class="expense-details">
        <h4>{{ expense.description || expense.category || 'Expense' }}</h4>
        <p class="text-secondary">
          {{ expense.category }} â€¢ {{ formatDate(expense.date) }}
        </p>
      </div>
      <div class="expense-amount text-error">
        -${{ (expense.amount < 0 ? -expense.amount : expense.amount).toFixed(2) }}
      </div>
      <button class="btn-icon-delete" (click)="deleteTransaction(expense.id)">
        <lucide-icon [img]="Trash2" [size]="16"></lucide-icon>
      </button>
    </div>
  </section>
</div>
